# –§—É–Ω–∫—Ü–∏—è table_bundles - –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å—Ç–æ–ª–æ–≤ –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## –û–ø–∏—Å–∞–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `table_bundles` –∏–∑ ReMarked API –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –≤—ã–±–æ—Ä–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π —Å—Ç–æ–ª–æ–≤ –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏.

## –ß—Ç–æ —Ç–∞–∫–æ–µ table_bundles?

`table_bundles` - —ç—Ç–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å—Ç–æ–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ –∏–∑ 6 —á–µ–ª–æ–≤–µ–∫ –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –¥–≤–∞ —Å—Ç–æ–ª–∞ (—Å—Ç–æ–ª 5 + —Å—Ç–æ–ª 6), —Ç–æ –≤ –æ—Ç–≤–µ—Ç–µ API –±—É–¥–µ—Ç:

```json
"table_bundles": [
  [330, 331],
  [332, 333]
]
```

## –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–π —Å—Ç–æ–ª–æ–≤

- –°—Ç–æ–ª—ã, –≤—Ö–æ–¥—è—â–∏–µ –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é, –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç—Å—è —Å–∏–Ω–∏–º —Ü–≤–µ—Ç–æ–º —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º
- –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
- –ú–æ–∂–Ω–æ –∫–ª–∏–∫–Ω—É—Ç—å –Ω–∞ —Å—Ç–æ–ª –∏–∑ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∏–ª–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –≤—Å–µ—Ö —Å—Ç–æ–ª–æ–≤ —Å—Ä–∞–∑—É

### 2. –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π

–ü–æ–¥ —Å—Ö–µ–º–æ–π –∑–∞–ª–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π —Å—Ç–æ–ª–æ–≤:
- –ö–∞–∂–¥–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –ø–æ–∫–∞–∑–∞–Ω–∞ –∫–∞–∫ –∫–Ω–æ–ø–∫–∞ —Å –Ω–æ–º–µ—Ä–∞–º–∏ —Å—Ç–æ–ª–æ–≤
- –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞ –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (`total_capacity`), –æ–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä—è–¥–æ–º
- –í—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º —Ü–≤–µ—Ç–æ–º
- –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å–µ—Ä—ã–º —Ü–≤–µ—Ç–æ–º

### 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º –∑–∞–ª–æ–≤ —Å ReMarked API

–î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π endpoint –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ö–µ–º –∑–∞–ª–æ–≤:

```
POST /restaurants/:id/sync-hall-schemes
```

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `date` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –î–∞—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–æ—Ç–æ–≤ (—Ñ–æ—Ä–º–∞—Ç YYYY-MM-DD), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ–≥–æ–¥–Ω—è
- `guests_count` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –ü–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω –æ—Ç ReMarked API
2. –í—ã–∑—ã–≤–∞–µ—Ç `GetSlots` —Å `with_rooms: true`
3. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–ª–∞—Ö –∏ —Å—Ç–æ–ª–∞—Ö –∏–∑ –æ—Ç–≤–µ—Ç–∞
4. –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ö–µ–º—ã –∑–∞–ª–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ö–µ–º—ã

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```typescript
// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º –∑–∞–ª–æ–≤ –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
const response = await api.post(`/restaurants/${restaurantId}/sync-hall-schemes`, null, {
  params: {
    date: '2024-06-25',
    guests_count: 4
  }
});
```

## –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã

### Backend (`backend/src/types/remarked.ts`)

```typescript
export interface TableBundle {
  tables: number[];           // –ú–∞—Å—Å–∏–≤ ID —Å—Ç–æ–ª–æ–≤ –≤ bundle
  total_capacity?: number;     // –û–±—â–∞—è –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å bundle
}

export interface Room {
  room_id: string | number;    // ID –∑–∞–ª–∞
  room_name: string;          // –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–ª–∞
  tables?: number[];          // –ú–∞—Å—Å–∏–≤ ID —Å—Ç–æ–ª–æ–≤ –≤ —ç—Ç–æ–º –∑–∞–ª–µ
}

export interface Slot {
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
  table_bundles?: TableBundle[] | number[][]; // –ì—Ä—É–ø–ø—ã —Å—Ç–æ–ª–æ–≤
  rooms?: Room[];             // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ª–∞—Ö
}
```

### Frontend (`frontend/types/booking.ts`)

–ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —Ç–∏–ø—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### HallSchemeViewer

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `tableBundles` –∏ `onBundleSelect`:

```tsx
<HallSchemeViewer
  hallSchemes={hallSchemes}
  selectedTableIds={selectedTableIds}
  availableTableIds={selectedSlot.tables_ids}
  tableBundles={selectedSlot.table_bundles}
  onTableSelect={handleTableToggle}
  onBundleSelect={handleBundleSelect}
/>
```

### Booking Page

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `table_bundles` –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–ª–æ—Ç–∞:

```tsx
// table_bundles –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏–∑ selectedSlot
const handleBundleSelect = (tableIds: number[]) => {
  setSelectedTableIds(tableIds);
};
```

## –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

1. **–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç–æ–ª—ã** - –∑–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç
2. **–°—Ç–æ–ª—ã –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏** - —Å–∏–Ω–∏–π —Ü–≤–µ—Ç —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º (—Ç–æ—á–∫–∞)
3. **–í—ã–±—Ä–∞–Ω–Ω—ã–µ —Å—Ç–æ–ª—ã** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
4. **–ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç–æ–ª—ã** - —Å–µ—Ä—ã–π —Ü–≤–µ—Ç —Å –ø–æ–Ω–∏–∂–µ–Ω–Ω–æ–π –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é

## –õ–µ–≥–µ–Ω–¥–∞

–ü–æ–¥ —Å—Ö–µ–º–æ–π –∑–∞–ª–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ª–µ–≥–µ–Ω–¥–∞ —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º —Ü–≤–µ—Ç–æ–≤:
- üü¢ –î–æ—Å—Ç—É–ø–µ–Ω
- üîµ –í –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º)
- üü£ –í—ã–±—Ä–∞–Ω
- ‚ö™ –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º**: –†–µ–≥—É–ª—è—Ä–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ —Å—Ö–µ–º—ã –∑–∞–ª–æ–≤ —Å ReMarked API –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–∞–ª–æ–≤
2. **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `with_rooms: true` –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Å–ª–æ—Ç–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
3. **UX**: –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å—Ç–æ–ª–æ–≤ —É–ø—Ä–æ—â–∞—é—Ç –≤—ã–±–æ—Ä –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π

## API Endpoints

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ö–µ–º –∑–∞–ª–æ–≤
```
GET /restaurants/:id/hall-schemes
```

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º –∑–∞–ª–æ–≤
```
POST /restaurants/:id/sync-hall-schemes?date=2024-06-25&guests_count=4
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤ —Å –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º–∏
```
GET /booking/slots?restaurantId=...&date=...&guests_count=...&with_rooms=true
```

## –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ GetSlots —Å table_bundles

```json
{
  "success": true,
  "data": {
    "slots": [
      {
        "start_datetime": "2024-06-25 14:00:00",
        "end_datetime": "2024-06-25 15:00:00",
        "is_free": true,
        "tables_count": 4,
        "tables_ids": [330, 331, 332, 333],
        "table_bundles": [
          {
            "tables": [330, 331],
            "total_capacity": 6
          },
          {
            "tables": [332, 333],
            "total_capacity": 6
          }
        ]
      }
    ]
  }
}
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- `table_bundles` –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ –º–∞—Å—Å–∏–≤–æ–º –æ–±—ä–µ–∫—Ç–æ–≤ `TableBundle[]`, —Ç–∞–∫ –∏ –º–∞—Å—Å–∏–≤–æ–º –º–∞—Å—Å–∏–≤–æ–≤ `number[][]`
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞
- –ï—Å–ª–∏ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `rooms`, –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ö–µ–º –∑–∞–ª–æ–≤
- –ï—Å–ª–∏ `rooms` –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–±—â–∏–π –∑–∞–ª —Å–æ –≤—Å–µ–º–∏ —Å—Ç–æ–ª–∞–º–∏
